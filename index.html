<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compteur de Pompes IA - MediaPipe</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
    <script defer src="script.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ’ª Compteur de Pompes</h1>
            <p class="subtitle">DÃ©tection par Google MediaPipe Pose</p>
        </header>

        <div class="main-grid">
            <div class="card">
                <div class="error" id="error"></div>
                <div class="video-container">
                    <video id="video" autoplay playsinline muted></video>
                    <canvas id="canvas"></canvas>
                    <div class="skeleton-indicator" id="skeletonIndicator">ğŸ¯ CORPS DÃ‰TECTÃ‰</div>
                    <div class="angle-display" id="angleDisplay">
                        Angle coude: <span id="angleValue">-</span>Â°
                    </div>
                </div>

                <div class="counter-big">
                    <div class="counter-number" id="counter">0</div>
                    <div class="counter-label">pompes cette session</div>
                    <div class="position-status neutral" id="positionStatus">En attente...</div>
                </div>

                <div class="controls">
                    <button class="btn btn-start" id="startBtn">â–¶ DÃ©marrer</button>
                    <button class="btn btn-stop" id="stopBtn" style="display:none;">â¹ Terminer</button>
                    <button class="btn btn-reset" id="resetBtn">â†» Reset</button>
                </div>
            </div>

            <div class="stats-section">
                <div class="card">
                    <h2>ğŸ“Š Statistiques</h2>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="totalCount">0</div>
                            <div class="stat-label">Total pompes</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value green" id="sessionCount">0</div>
                            <div class="stat-label">Sessions</div>
                        </div>
                    </div>
                    <div class="record-box" id="recordBox" style="display:none;">
                        ğŸ† <strong>Record:</strong> <span id="recordValue">0</span> pompes
                    </div>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h2>ğŸ“… Historique</h2>
                    <div class="history-list" id="historyList">
                        <div class="empty-state">Aucune session enregistrÃ©e</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card instructions">
            <h3>ğŸ“‹ Comment Ã§a marche ?</h3>
            <ol>
                <li>Cliquez sur "DÃ©marrer" et autorisez l'accÃ¨s camÃ©ra</li>
                <li>Placez-vous de PROFIL devant la camÃ©ra</li>
                <li>MediaPipe dÃ©tecte votre squelette en temps rÃ©el</li>
                <li>Faites vos pompes : angle coude 90Â° puis 160Â°</li>
            </ol>
            <div class="tip">
                ğŸ’¡ Positionnez-vous de profil pour une dÃ©tection optimale
            </div>
        </div>
    </div>

</body>
</html>